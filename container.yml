---
version: "2"
settings:
  conductor_base: centos:7
services:
  centos6:
    from: "quay.io/aaroc/ansible-ready-centos6"
    roles:
      - CODE-RADE-container
    ports:
        - "5000:5200"
    command: ["/usr/sbin/sshd", "-D","-p","5200"]
    volumes_from:
      - code-rade-src:rw
      - code-rade-modules:rw
      - code-rade-soft:rw
      - code-rade-repo:rw
      - code-rade-cvmfs:rw
  centos7:
    from: "quay.io/aaroc/ansible-ready-centos7"
    roles:
      - CODE-RADE-container
    ports:
        - "5001:5200"
    command: ["/usr/sbin/sshd", "-D","-p","5200"]
    volumes_from:
      - code-rade-src:rw
      - code-rade-modules:rw
      - code-rade-soft:rw
      - code-rade-repo:rw
      - code-rade-cvmfs:rw
  ubuntu1404:
    from: "quay.io/aaroc/ansible-ready-ubuntu14.04"
    roles:
      - CODE-RADE-container
    ports:
        - "5002:5200"
    command: ["/usr/sbin/sshd", "-D","-p","5200"]
    volumes_from:
      - code-rade-src:rw
      - code-rade-modules:rw
      - code-rade-soft:rw
      - code-rade-repo:rw
      - code-rade-cvmfs:rw
  ubuntu1610:
    from: "quay.io/aaroc/ansible-ready-ubuntu16.10"
    roles:
      - CODE-RADE-container
    ports:
        - "5003:5200"
    command: ["/usr/sbin/sshd", "-D","-p","5200"]
    volumes_from:
      - code-rade-src:rw
      - code-rade-modules:rw
      - code-rade-soft:rw
      - code-rade-repo:rw
      - code-rade-cvmfs:rw

  # code-rade-src:
  #   from: alpine
  #   command: ["/bin/sh","-c","while true; do sleep 1000; done"]
  #   volumes:
  #     - /data/src
  # code-rade-soft:
  #   from: alpine
  #   command: ["/bin/sh","-c","while true; do sleep 1000; done"]
  #   volumes:
  #     - /data/ci-build
  # code-rade-repo:
  #   from: alpine
  #   command: ["/bin/sh","-c","while true; do sleep 1000; done"]
  #   volumes:
  #     - /data/artefacts
  # code-rade-modules:
  #   from: alpine
  #   command: ["/bin/sh","-c","while true; do sleep 1000; done"]
  #   volumes:
  #     - /data/modules
  # code-rade-cvmfs:
  #   from: alpine
  #   command: ["/bin/sh","-c","while true; do sleep 1000; done"]
  #   volumes:
  #     - /cvmfs

volumes:
  code-rade-src:
   docker:
    - /data/src
  code-rade-soft:
    docker:
    - /data/ci-build
  code-rade-repo:
    docker:
    - /data/artefacts
  code-rade-modules:
    docker:
    - /data/modules
  code-rade-cvmfs:
    docker:
    - /cvmfs

registries:
  docker:
    url: https://hub.docker.com
    namespace: /u/aaroc
  quay:
    url: https://quay.io
    namespace: aaroc
